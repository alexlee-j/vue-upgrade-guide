<template>
  <div class="migration-page">
    <h1>ğŸš§ è¿ç§»æ­¥éª¤</h1>
    <p class="page-description">
      ä» Vue 2 åˆ° Vue 3 çš„è¯¦ç»†è¿ç§»æ­¥éª¤ï¼Œç¡®ä¿å¹³ç¨³è¿‡æ¸¡
    </p>
    
    <section class="section-card">
      <h2>æ­¥éª¤ 1ï¼šä¾èµ–å‡çº§</h2>
      <p>æ›´æ–°é¡¹ç›®ä¾èµ–ï¼Œç¡®ä¿ä½¿ç”¨å…¼å®¹ Vue 3 çš„ç‰ˆæœ¬ã€‚</p>
      <ul>
        <li><strong>Vue æ ¸å¿ƒï¼š</strong>ä» 2.x å‡çº§åˆ° 3.x</li>
        <li><strong>Vue Routerï¼š</strong>ä» 3.x å‡çº§åˆ° 4.x</li>
        <li><strong>Vuexï¼š</strong>ä» 3.x å‡çº§åˆ° 4.xï¼ˆæˆ–è€ƒè™‘ Piniaï¼‰</li>
        <li><strong>æ„å»ºå·¥å…·ï¼š</strong>å‡çº§åˆ° Vite æˆ–æ›´æ–° Webpack é…ç½®</li>
        <li><strong>å…¶ä»–ä¾èµ–ï¼š</strong>ç¡®ä¿æ‰€æœ‰ç¬¬ä¸‰æ–¹åº“æ”¯æŒ Vue 3</li>
      </ul>
      <div class="code-example">
        <h4>ä¾èµ–æ›´æ–°ç¤ºä¾‹ï¼ˆpackage.jsonï¼‰ï¼š</h4>
        <pre><code>{"dependencies": {
  "vue": "^3.4.0",
  "vue-router": "^4.2.0",
  "pinia": "^2.1.0"
}}</code></pre>
      </div>
    </section>
    
    <section class="section-card">
      <h2>æ­¥éª¤ 2ï¼šä»£ç è¿ç§»</h2>
      <p>é€æ­¥è¿ç§»ä»£ç ï¼Œä»åŸºç¡€éƒ¨åˆ†å¼€å§‹ã€‚</p>
      <div class="migration-steps">
        <div class="step-item">
          <h3>2.1 å…¥å£æ–‡ä»¶æ›´æ–°</h3>
          <p>æ›´æ–° main.js/main.ts æ–‡ä»¶ï¼Œä½¿ç”¨ Vue 3 çš„ APIã€‚</p>
          <div class="code-example">
            <pre><code>// Vue 2
import Vue from 'vue'
import App from './App.vue'
import router from './router'
import store from './store'

Vue.config.productionTip = false

new Vue({
  router,
  store,
  render: h => h(App)
}).$mount('#app')

// Vue 3
import { createApp } from 'vue'
import App from './App.vue'
import router from './router'
import store from './store'

const app = createApp(App)
app.use(router)
app.use(store)
app.mount('#app')</code></pre>
          </div>
        </div>
        
        <div class="step-item">
          <h3>2.2 ç»„ä»¶è¿ç§»</h3>
          <p>é€æ­¥è¿ç§»ç»„ä»¶ï¼Œä¼˜å…ˆå¤„ç†åŸºç¡€ç»„ä»¶ã€‚</p>
          <ul>
            <li>æ›´æ–°ç»„ä»¶é€‰é¡¹ API ç”¨æ³•</li>
            <li>å¤„ç†åºŸå¼ƒçš„ç”Ÿå‘½å‘¨æœŸé’©å­</li>
            <li>æ›´æ–°æŒ‡ä»¤å’Œè¿‡æ»¤å™¨</li>
            <li>è€ƒè™‘ä½¿ç”¨ Composition API é‡æ„å¤æ‚ç»„ä»¶</li>
          </ul>
        </div>
        
        <div class="step-item">
          <h3>2.3 å“åº”æ€§ç³»ç»Ÿè¿ç§»</h3>
          <p>æ›´æ–°å“åº”æ€§æ•°æ®çš„ä½¿ç”¨æ–¹å¼ã€‚</p>
          <ul>
            <li>äº†è§£ ref å’Œ reactive çš„åŒºåˆ«</li>
            <li>æ³¨æ„æ¨¡æ¿ä¸­çš„ .value ä½¿ç”¨</li>
            <li>æ›´æ–°è®¡ç®—å±æ€§å’Œç›‘å¬å™¨</li>
          </ul>
        </div>
      </div>
    </section>
    
    <section class="section-card">
      <h2>æ­¥éª¤ 3ï¼šè·¯ç”±è¿ç§»</h2>
      <p>æ›´æ–° Vue Router é…ç½®ï¼Œä½¿ç”¨ Vue Router 4 çš„ APIã€‚</p>
      <div class="code-example">
        <pre><code>// Vue 2 + Vue Router 3
import Vue from 'vue'
import Router from 'vue-router'
import Home from './views/Home.vue'

Vue.use(Router)

export default new Router({
  mode: 'history',
  routes: [
    {
      path: '/',
      name: 'Home',
      component: Home
    }
  ]
})

// Vue 3 + Vue Router 4
import { createRouter, createWebHistory } from 'vue-router'
import Home from './views/Home.vue'

const router = createRouter({
  history: createWebHistory(),
  routes: [
    {
      path: '/',
      name: 'Home',
      component: Home
    }
  ]
})

export default router</code></pre>
      </div>
    </section>
    
    <section class="section-card">
      <h2>æ­¥éª¤ 4ï¼šçŠ¶æ€ç®¡ç†è¿ç§»</h2>
      <p>æ›´æ–°çŠ¶æ€ç®¡ç†é…ç½®ï¼Œè€ƒè™‘ä½¿ç”¨ Pinia ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆã€‚</p>
      <div class="code-example">
        <pre><code>// Vuex 4 ç¤ºä¾‹
import { createStore } from 'vuex'

export default createStore({
  state: {
    count: 0
  },
  mutations: {
    increment(state) {
      state.count++
    }
  },
  actions: {
    incrementAsync({ commit }) {
      setTimeout(() => {
        commit('increment')
      }, 1000)
    }
  }
})

// Pinia ç¤ºä¾‹
import { defineStore } from 'pinia'

export const useCounterStore = defineStore('counter', {
  state: () => ({
    count: 0
  }),
  actions: {
    increment() {
      this.count++
    },
    incrementAsync() {
      setTimeout(() => {
        this.count++
      }, 1000)
    }
  }
})</code></pre>
      </div>
    </section>
    
    <section class="section-card">
      <h2>æ­¥éª¤ 5ï¼šæµ‹è¯•å’ŒéªŒè¯</h2>
      <p>ç¡®ä¿è¿ç§»åçš„ä»£ç èƒ½å¤Ÿæ­£å¸¸è¿è¡Œã€‚</p>
      <ul>
        <li><strong>å•å…ƒæµ‹è¯•ï¼š</strong>è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•ï¼Œç¡®ä¿é€šè¿‡</li>
        <li><strong>é›†æˆæµ‹è¯•ï¼š</strong>éªŒè¯æ¨¡å—é—´çš„åä½œ</li>
        <li><strong>E2E æµ‹è¯•ï¼š</strong>ç¡®ä¿ç”¨æˆ·æµç¨‹æ­£å¸¸</li>
        <li><strong>æ‰‹åŠ¨æµ‹è¯•ï¼š</strong>é‡ç‚¹æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½</li>
        <li><strong>æ€§èƒ½æµ‹è¯•ï¼š</strong>å¯¹æ¯”å‡çº§å‰åçš„æ€§èƒ½</li>
      </ul>
    </section>
    
    <section class="section-card">
      <h2>å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h2>
      <div class="faq-grid">
        <div class="faq-item">
          <h3>â“ ç”Ÿå‘½å‘¨æœŸé’©å­å˜æ›´</h3>
          <p><strong>é—®é¢˜ï¼š</strong>Vue 3 ä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­åç§°å˜æ›´</p>
          <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
          <ul>
            <li>beforeCreate â†’ setup()</li>
            <li>created â†’ setup()</li>
            <li>beforeMount â†’ onBeforeMount</li>
            <li>mounted â†’ onMounted</li>
            <li>beforeUpdate â†’ onBeforeUpdate</li>
            <li>updated â†’ onUpdated</li>
            <li>beforeDestroy â†’ onBeforeUnmount</li>
            <li>destroyed â†’ onUnmounted</li>
          </ul>
        </div>
        <div class="faq-item">
          <h3>â“ è¿‡æ»¤å™¨ç§»é™¤</h3>
          <p><strong>é—®é¢˜ï¼š</strong>Vue 3 ç§»é™¤äº†è¿‡æ»¤å™¨åŠŸèƒ½</p>
          <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
          <ul>
            <li>ä½¿ç”¨è®¡ç®—å±æ€§æ›¿ä»£</li>
            <li>ä½¿ç”¨æ–¹æ³•è°ƒç”¨æ›¿ä»£</li>
            <li>åˆ›å»ºå…¨å±€å·¥å…·å‡½æ•°</li>
          </ul>
        </div>
        <div class="faq-item">
          <h3>â“ this ä¸Šä¸‹æ–‡å˜æ›´</h3>
          <p><strong>é—®é¢˜ï¼š</strong>Composition API ä¸­æ²¡æœ‰ this</p>
          <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
          <ul>
            <li>ä½¿ç”¨ setup() è¿”å›çš„å“åº”å¼æ•°æ®</li>
            <li>ä½¿ç”¨ provide/inject ä¼ é€’ä¾èµ–</li>
            <li>ä½¿ç”¨ getCurrentInstance() è·å–å®ä¾‹ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰</li>
          </ul>
        </div>
      </div>
    </section>
  </div>
</template>

<script setup lang="ts">
// Migration page component
</script>

<style scoped>
.migration-page {
  padding: 1rem;
  max-width: 1000px;
  margin: 0 auto;
}

.page-description {
  font-size: 1.2rem;
  color: var(--color-text-secondary);
  margin-bottom: 2rem;
  text-align: center;
}

.section-card {
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  padding: 1.5rem;
  margin-bottom: 2rem;
}

.section-card h2 {
  margin-top: 0;
  color: var(--color-text);
  border-bottom: 2px solid var(--color-primary);
  padding-bottom: 0.5rem;
}

.section-card ul {
  padding-left: 1.5rem;
}

.section-card li {
  margin-bottom: 0.5rem;
}

.migration-steps {
  margin-top: 1.5rem;
}

.step-item {
  background-color: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 4px;
  padding: 1rem;
  margin-bottom: 1.5rem;
}

.step-item h3 {
  margin-top: 0;
  color: var(--color-text);
}

.code-example {
  background-color: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 4px;
  padding: 1rem;
  margin-top: 1rem;
  overflow-x: auto;
}

.code-example h4 {
  margin-top: 0;
  color: var(--color-text);
}

.code-example pre {
  margin: 0;
  font-family: 'Courier New', Courier, monospace;
  font-size: 0.9rem;
}

.faq-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin-top: 1.5rem;
}

.faq-item {
  background-color: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 4px;
  padding: 1rem;
}

.faq-item h3 {
  margin-top: 0;
  color: var(--color-text);
}
</style>
