<template>
  <div class="typescript-page">
    <h1>ğŸŸ¦ TypeScript é›†æˆ</h1>
    <p class="page-description">
      æ·±å…¥äº†è§£ Vue 3 ä¸ TypeScript çš„é›†æˆæ–¹æ³•å’Œæœ€ä½³å®è·µ
    </p>
    
    <section class="section-card">
      <h2>TypeScript ä¸ Vue 3 é›†æˆæ¦‚è¿°</h2>
      <p>Vue 3 æä¾›äº†åŸç”Ÿçš„ TypeScript æ”¯æŒï¼Œç›¸æ¯” Vue 2ï¼ŒTypeScript é›†æˆæ›´åŠ å®Œå–„å’Œæµç•…ã€‚</p>
      <ul>
        <li><strong>åŸç”Ÿæ”¯æŒï¼š</strong>Vue 3 æºç ä½¿ç”¨ TypeScript ç¼–å†™ï¼Œæä¾›äº†å®Œå–„çš„ç±»å‹å®šä¹‰</li>
        <li><strong>æ›´å¥½çš„ç±»å‹æ¨æ–­ï¼š</strong>ç»„åˆå¼ API æä¾›äº†æ›´å¥½çš„ TypeScript ç±»å‹æ¨æ–­</li>
        <li><strong>ç±»å‹å®‰å…¨ï¼š</strong>é€šè¿‡ TypeScript å¯ä»¥åœ¨ç¼–è¯‘æ—¶æ•è·æ›´å¤šé”™è¯¯</li>
        <li><strong>å¼€å‘ä½“éªŒï¼š</strong>æ›´å¥½çš„ IDE æ”¯æŒå’Œä»£ç æç¤º</li>
      </ul>
    </section>
    
    <section class="section-card">
      <h2>é¡¹ç›®é…ç½®</h2>
      <p>é…ç½® TypeScript é¡¹ç›®ï¼Œç¡®ä¿æ­£ç¡®çš„ç±»å‹æ£€æŸ¥å’Œç¼–è¯‘é€‰é¡¹ã€‚</p>
      <div class="code-example">
        <h4>tsconfig.json é…ç½®ç¤ºä¾‹ï¼š</h4>
        <pre><code>{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "module": "ESNext",
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "preserve",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true
  },
  "include": ["src/**/*.ts", "src/**/*.d.ts", "src/**/*.tsx", "src/**/*.vue"],
  "references": [{ "path": "./tsconfig.node.json" }]
}</code></pre>
      </div>
      <div class="code-example">
        <h4>tsconfig.node.json é…ç½®ç¤ºä¾‹ï¼š</h4>
        <pre><code>{
  "compilerOptions": {
    "composite": true,
    "skipLibCheck": true,
    "module": "ESNext",
    "moduleResolution": "bundler",
    "allowSyntheticDefaultImports": true
  },
  "include": ["vite.config.ts"]
}</code></pre>
      </div>
      <div class="code-example">
        <h4>vite.config.ts é…ç½®ç¤ºä¾‹ï¼š</h4>
        <pre><code>import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [vue()],
})</code></pre>
      </div>
    </section>
    
    <section class="section-card">
      <h2>ç»„ä»¶çš„ç±»å‹å®šä¹‰</h2>
      <p>ä½¿ç”¨ TypeScript ä¸º Vue ç»„ä»¶æ·»åŠ ç±»å‹å®šä¹‰ï¼Œæé«˜ä»£ç çš„ç±»å‹å®‰å…¨æ€§ã€‚</p>
      <div class="code-example">
        <h4>ä½¿ç”¨ defineComponent å®šä¹‰ç»„ä»¶ï¼š</h4>
        <pre><code>import { defineComponent, ref, computed } from 'vue'

export default defineComponent({
  name: 'HelloWorld',
  props: {
    msg: {
      type: String,
      required: true
    }
  },
  setup(props) {
    const count = ref(0)
    const doubleCount = computed(() => count.value * 2)
    
    const increment = () => {
      count.value++
    }
    
    return {
      count,
      doubleCount,
      increment
    }
  }
})</code></pre>
      </div>
      <div class="code-example">
        <h4>ä½¿ç”¨ &lt;script setup&gt; è¯­æ³•ï¼š</h4>
        <pre><code>&lt;script setup lang="ts"&gt;
import { ref, computed } from 'vue'

interface Props {
  msg: string
  count?: number
}

const props = defineProps&lt;Props&gt;()

const emit = defineEmits&lt;{
  (e: 'update:count', value: number): void
  (e: 'reset'): void
}&gt;()

const localCount = ref(props.count || 0)
const doubleCount = computed(() => localCount.value * 2)

const increment = () => {
  localCount.value++
  emit('update:count', localCount.value)
}

const reset = () => {
  localCount.value = 0
  emit('reset')
}
&lt;/script&gt;</code></pre>
      </div>
    </section>
    
    <section class="section-card">
      <h2>å“åº”å¼æ•°æ®çš„ç±»å‹å®šä¹‰</h2>
      <p>ä¸ºå“åº”å¼æ•°æ®æ·»åŠ ç±»å‹å®šä¹‰ï¼Œç¡®ä¿ç±»å‹å®‰å…¨ã€‚</p>
      <div class="code-example">
        <h4>ref çš„ç±»å‹å®šä¹‰ï¼š</h4>
        <pre><code>import { ref } from 'vue'

// åŸºæœ¬ç±»å‹
const count = ref&lt;number&gt;(0)
const message = ref&lt;string&gt;('Hello')
const isLoading = ref&lt;boolean&gt;(false)

// å¤æ‚ç±»å‹
interface User {
  id: number
  name: string
  email: string
}

const user = ref&lt;User | null&gt;(null)
const users = ref&lt;User[]&gt;([])

// æ³›å‹
const genericRef = ref&lt;T&gt;(initialValue)</code></pre>
      </div>
      <div class="code-example">
        <h4>reactive çš„ç±»å‹å®šä¹‰ï¼š</h4>
        <pre><code>import { reactive } from 'vue'

interface State {
  user: {
    id: number
    name: string
  }
  settings: {
    theme: 'light' | 'dark'
    notifications: boolean
  }
}

const state = reactive&lt;State&gt;({
  user: {
    id: 1,
    name: 'John'
  },
  settings: {
    theme: 'light',
    notifications: true
  }
})

// æˆ–è€…ä½¿ç”¨ç±»å‹æ–­è¨€
const state = reactive({
  user: {
    id: 1,
    name: 'John'
  },
  settings: {
    theme: 'light',
    notifications: true
  }
}) as State</code></pre>
      </div>
      <div class="code-example">
        <h4>computed çš„ç±»å‹å®šä¹‰ï¼š</h4>
        <pre><code>import { ref, computed } from 'vue'

const count = ref(0)

// è‡ªåŠ¨ç±»å‹æ¨æ–­
const doubleCount = computed(() => count.value * 2)
// doubleCount ç±»å‹ä¸º ComputedRef&lt;number&gt;

// æ˜¾å¼ç±»å‹å®šä¹‰
const formattedCount = computed&lt;string&gt;(() => {
  return `Count: ${count.value}`
})
// formattedCount ç±»å‹ä¸º ComputedRef&lt;string&gt;</code></pre>
      </div>
    </section>
    
    <section class="section-card">
      <h2>Props å’Œ Emits çš„ç±»å‹å®šä¹‰</h2>
      <p>ä¸ºç»„ä»¶çš„ Props å’Œ Emits æ·»åŠ ç±»å‹å®šä¹‰ï¼Œç¡®ä¿ç»„ä»¶æ¥å£çš„ç±»å‹å®‰å…¨ã€‚</p>
      <div class="code-example">
        <h4>ä½¿ç”¨ &lt;script setup&gt; å®šä¹‰ Props å’Œ Emitsï¼š</h4>
        <pre><code>&lt;script setup lang="ts"&gt;
// æ–¹å¼ 1ï¼šä½¿ç”¨æ¥å£å®šä¹‰ Props
interface Props {
  name: string
  age?: number
  disabled: boolean
}

const props = defineProps&lt;Props&gt;()

// æ–¹å¼ 2ï¼šä½¿ç”¨ç±»å‹å­—é¢é‡å®šä¹‰ Props
const props = defineProps&lt;{
  name: string
  age?: number
  disabled: boolean
  tags: string[]
  options: Record&lt;string, string&gt;
}&gt;()

// å®šä¹‰ Emits
const emit = defineEmits&lt;{
  (e: 'click', event: MouseEvent): void
  (e: 'update:value', value: string): void
  (e: 'submit', formData: {
    name: string
    email: string
  }): void
}&gt;()

// ä½¿ç”¨ Emits
const handleClick = (event: MouseEvent) => {
  emit('click', event)
}

const handleSubmit = () => {
  emit('submit', {
    name: 'John',
    email: 'john@example.com'
  })
}
&lt;/script&gt;</code></pre>
      </div>
    </section>
    
    <section class="section-card">
      <h2>ç»„åˆå¼ API çš„ç±»å‹å®šä¹‰</h2>
      <p>ä¸ºç»„åˆå¼ API å‡½æ•°å’Œ Composables æ·»åŠ ç±»å‹å®šä¹‰ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚</p>
      <div class="code-example">
        <h4>Composable çš„ç±»å‹å®šä¹‰ï¼š</h4>
        <pre><code>// composables/useCounter.ts
import { ref, computed, Ref } from 'vue'

export interface UseCounterReturn {
  count: Ref&lt;number&gt;
  doubleCount: Ref&lt;number&gt;
  increment: () => void
  decrement: () => void
  reset: () => void
}

export function useCounter(initialValue: number = 0): UseCounterReturn {
  const count = ref(initialValue)
  const doubleCount = computed(() => count.value * 2)
  
  const increment = () => {
    count.value++
  }
  
  const decrement = () => {
    count.value--
  }
  
  const reset = () => {
    count.value = initialValue
  }
  
  return {
    count,
    doubleCount,
    increment,
    decrement,
    reset
  }
}

// ä½¿ç”¨
import { useCounter } from '@/composables/useCounter'

const { count, doubleCount, increment } = useCounter(0)</code></pre>
      </div>
    </section>
    
    <section class="section-card">
      <h2>å·¥å…·ç±»å‹å’Œè¾…åŠ©å‡½æ•°</h2>
      <p>Vue 3 æä¾›äº†ä¸€äº›å·¥å…·ç±»å‹å’Œè¾…åŠ©å‡½æ•°ï¼Œå¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ä½¿ç”¨ TypeScriptã€‚</p>
      <div class="code-example">
        <h4>å¸¸ç”¨çš„å·¥å…·ç±»å‹ï¼š</h4>
        <pre><code>import type { Ref, ComputedRef, reactive, RefUnwrapBailTypes } from 'vue'

// Ref ç±»å‹
type CountRef = Ref&lt;number&gt;

// ComputedRef ç±»å‹
type DoubleCountRef = ComputedRef&lt;number&gt;

// ä» Ref ä¸­æå–ç±»å‹
type CountType = Parameters&lt;typeof ref&lt;number&gt;&gt;[0]

// è§£åŒ… Ref ç±»å‹
type UnwrappedCount = CountRef extends Ref&lt;infer T&gt; ? T : never

// å“åº”å¼å¯¹è±¡çš„ç±»å‹
type ReactiveState = ReturnType&lt;typeof reactive&lt;State&gt;&gt;</code></pre>
      </div>
    </section>
    
    <section class="section-card">
      <h2>æœ€ä½³å®è·µ</h2>
      <ul>
        <li><strong>å§‹ç»ˆä½¿ç”¨ defineComponentï¼š</strong>ä¸ºç»„ä»¶æ·»åŠ ç±»å‹å®šä¹‰ï¼Œè·å¾—æ›´å¥½çš„ç±»å‹æ¨æ–­</li>
        <li><strong>ä½¿ç”¨ &lt;script setup&gt;ï¼š</strong>æä¾›æ›´ç®€æ´çš„ TypeScript é›†æˆ</li>
        <li><strong>ä¸ºæ‰€æœ‰å“åº”å¼æ•°æ®æ·»åŠ ç±»å‹ï¼š</strong>ç¡®ä¿å“åº”å¼æ•°æ®çš„ç±»å‹å®‰å…¨</li>
        <li><strong>ä½¿ç”¨æ¥å£å®šä¹‰å¤æ‚ç±»å‹ï¼š</strong>æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§</li>
        <li><strong>åˆç†ä½¿ç”¨æ³›å‹ï¼š</strong>ä¸ºå¯å¤ç”¨çš„ä»£ç æ·»åŠ æ³›å‹æ”¯æŒ</li>
        <li><strong>é¿å… any ç±»å‹ï¼š</strong>å°½é‡å‡å°‘ä½¿ç”¨ any ç±»å‹ï¼Œæé«˜ç±»å‹å®‰å…¨æ€§</li>
        <li><strong>ä½¿ç”¨ç±»å‹æ–­è¨€æ—¶è¦è°¨æ…ï¼š</strong>ç¡®ä¿ç±»å‹æ–­è¨€çš„æ­£ç¡®æ€§</li>
        <li><strong>ä¿æŒç±»å‹å®šä¹‰çš„ä¸€è‡´æ€§ï¼š</strong>åœ¨æ•´ä¸ªé¡¹ç›®ä¸­ä¿æŒç±»å‹å®šä¹‰çš„ä¸€è‡´æ€§</li>
      </ul>
    </section>
    
    <section class="section-card">
      <h2>å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h2>
      <div class="faq-grid">
        <div class="faq-item">
          <h3>â“ ç±»å‹æ¨æ–­é—®é¢˜</h3>
          <p><strong>é—®é¢˜ï¼š</strong>TypeScript æ— æ³•æ­£ç¡®æ¨æ–­æŸäº›ç±»å‹</p>
          <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong>æ˜¾å¼æ·»åŠ ç±»å‹æ³¨è§£ï¼Œä½¿ç”¨ as ç±»å‹æ–­è¨€ï¼Œæˆ–ä½¿ç”¨æ³›å‹</p>
        </div>
        <div class="faq-item">
          <h3>â“ å¾ªç¯ä¾èµ–ç±»å‹</h3>
          <p><strong>é—®é¢˜ï¼š</strong>ç±»å‹å®šä¹‰ä¸­å­˜åœ¨å¾ªç¯ä¾èµ–</p>
          <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong>ä½¿ç”¨æ¥å£å®šä¹‰ï¼Œæ‹†åˆ†ç±»å‹å®šä¹‰æ–‡ä»¶ï¼Œæˆ–ä½¿ç”¨å‰å‘å£°æ˜</p>
        </div>
        <div class="faq-item">
          <h3>â“ ç¬¬ä¸‰æ–¹åº“ç±»å‹</h3>
          <p><strong>é—®é¢˜ï¼š</strong>ç¬¬ä¸‰æ–¹åº“ç¼ºå°‘ç±»å‹å®šä¹‰æˆ–ç±»å‹å®šä¹‰ä¸æ­£ç¡®</p>
          <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong>å®‰è£… @types/xxx åŒ…ï¼Œåˆ›å»ºå£°æ˜æ–‡ä»¶ï¼Œæˆ–ä½¿ç”¨ç±»å‹æ–­è¨€</p>
        </div>
        <div class="faq-item">
          <h3>â“ æ€§èƒ½é—®é¢˜</h3>
          <p><strong>é—®é¢˜ï¼š</strong>TypeScript ç±»å‹æ£€æŸ¥å½±å“ç¼–è¯‘æ€§èƒ½</p>
          <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong>ä¼˜åŒ–ç±»å‹å®šä¹‰ï¼Œä½¿ç”¨ incremental ç¼–è¯‘ï¼Œæˆ–è°ƒæ•´ tsconfig é€‰é¡¹</p>
        </div>
      </div>
    </section>
  </div>
</template>

<script setup lang="ts">
// TypeScript page component
</script>

<style scoped>
.typescript-page {
  padding: 1rem;
  max-width: 1000px;
  margin: 0 auto;
}

.page-description {
  font-size: 1.2rem;
  color: var(--color-text-secondary);
  margin-bottom: 2rem;
  text-align: center;
}

.section-card {
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  padding: 1.5rem;
  margin-bottom: 2rem;
}

.section-card h2 {
  margin-top: 0;
  color: var(--color-text);
  border-bottom: 2px solid var(--color-primary);
  padding-bottom: 0.5rem;
}

.section-card ul {
  padding-left: 1.5rem;
}

.section-card li {
  margin-bottom: 0.5rem;
}

.faq-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin-top: 1.5rem;
}

.faq-item {
  background-color: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 4px;
  padding: 1rem;
}

.faq-item h3 {
  margin-top: 0;
  color: var(--color-text);
}

.code-example {
  background-color: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 4px;
  padding: 1rem;
  margin-top: 1rem;
  overflow-x: auto;
}

.code-example h4 {
  margin-top: 0;
  color: var(--color-text);
}

.code-example pre {
  margin: 0;
  font-family: 'Courier New', Courier, monospace;
  font-size: 0.9rem;
}
</style>
